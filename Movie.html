<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CineLux</title>

<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
<script src="https://accounts.google.com/gsi/client" async defer></script>

<style>
:root {
    --gold:#D4AF37;
    --bg:#050505;
    --glass:rgba(255,255,255,.05);
    --border:rgba(255,255,255,.12);
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Plus Jakarta Sans',sans-serif;}
body{background:var(--bg);color:#fff}

/* Container for the buttons */
.movie-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 10px;
    opacity: 0; /* Hidden by default */
    transition: 0.3s ease;
    z-index: 2;
}
small {
    font-size: 12px;
    display: block;
    margin-top: 2px;
}
.info-group p {
    font-size: 16px;
    margin-top: 5px;
}


/* Show overlay on hover */
.movie-card:hover .movie-overlay {
    opacity: 1;
}

/* Button Styles */
.opt-btn {
    width: 80%;
    padding: 10px;
    border: none;
    border-radius: 5px;
    font-weight: 800;
    cursor: pointer;
    transition: 0.2s;
}

.play-btn {
    background: var(--gold);
    color: black;
}

.watch-btn {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.opt-btn:hover {
    transform: scale(1.05);
}

/* AUTH */
#authOverlay{
    position:fixed;inset:0;
    background:#050505;
    display:flex;align-items:center;justify-content:center;
    z-index:9999;text-align:center;
}
/* --- NAVIGATION --- */
        nav {
            display: grid; grid-template-columns: 1fr 2fr 1fr; align-items: center;
            padding: 0 5%; height: 90px; position: fixed; width: 100%; z-index: 2000;
            background: linear-gradient(to bottom, rgba(5,5,5,0.9), transparent); backdrop-filter: blur(15px);
        }
        .search-box { background: var(--glass); border: 1px solid var(--border); padding: 10px 20px; border-radius: 100px; display: flex; align-items: center; }
        .search-box input { background: transparent; border: none; color: white; outline: none; width: 100%; margin-left: 10px; }

        /* --- HERO BANNER --- */
        .hero {
            height: 80vh; padding: 0 8%; display: flex; align-items: center;
            background: linear-gradient(to right, #050505 30%, transparent), url('https://images.unsplash.com/photo-1626814026160-2237a95fc5a0?w=1600') center/cover;
        }

        /* --- SIDEBAR --- */
        .sidebar { position: fixed; left: -400px; top: 0; width: 320px; height: 100vh; background: #000; z-index: 4000; padding: 60px 40px; transition: 0.5s; border-right: 1px solid var(--border); }
        .sidebar.open { left: 0; }
        .side-link { display: block; font-size: 18px; padding: 10px 0; color: #ccc; cursor: pointer; transition: 0.3s; }
        .side-link:hover { color: var(--gold); transform: translateX(5px); }

        /* --- CONTENT --- */
        .container { padding: 40px 8%; }
        .panel { display: none; animation: fadeIn 0.4s ease; }
        .active-panel { display: block; }
        .movie-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; }
        .movie-card { border-radius: 15px; overflow: hidden; height: 320px; cursor: pointer; border: 1px solid var(--border); position: relative; transition: 0.4s; }
        .movie-card:hover { transform: scale(1.05); border-color: var(--gold); }
        .movie-card img { width: 100%; height: 100%; object-fit: cover; }

        /* --- INPUTS --- */
        .card { background: #111; padding: 30px; border-radius: 20px; border: 1px solid var(--border); }
        .input-f { width: 100%; padding: 15px; background: #000; border: 1px solid #333; color: white; border-radius: 10px; margin-bottom: 15px; }
        .btn-gold { background: var(--gold); border: none; width: 100%; padding: 15px; border-radius: 10px; font-weight: 800; cursor: pointer; }

.movie-info {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: linear-gradient(transparent, rgba(0,0,0,0.9));
    padding: 20px 15px !important;
}


        /* --- VIDEO PLAYER --- */
        #theater { position: fixed; inset: 0; background: #000; z-index: 9000; display: none; flex-direction: column; }
        video { width: 100%; height: 90vh; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>

<body>

<!-- AUTH -->
<div id="authOverlay">
    <div>
        <h1 style="font-size:3.5rem">
            CINE<span style="color:var(--gold)">LUX</span>
        </h1>

        <!-- GOOGLE LOGIN -->
        <div id="g_id_onload"
             data-client_id="739537461326-r2gspogeoruch5a4b2m6kui2v9e1lchp.apps.googleusercontent.com"
             data-callback="onGoogleLogin"
             data-auto_prompt="false">
        </div>

        <div class="g_id_signin"
             data-type="standard"
             data-size="large"
             data-theme="outline"
             data-shape="pill"
             data-text="continue_with">
        </div>
    </div>
</div>

<!-- VIDEO PLAYER -->

    <div id="theater">
        <div style="padding: 15px 5%; display: flex; justify-content: space-between;">
            <h2 id="mTitle">Now Playing</h2>
            <button onclick="closeTheater()" style="color:var(--gold); background:none; border:none; cursor:pointer; font-weight:800;">CLOSE ✕</button>
        </div>
        <video id="vid" controls autoplay><source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4"></video>
    </div>

    <nav>
        <div onclick="toggleMenu()" style="color:var(--gold); cursor:pointer; font-weight:800;">☰ MENU</div>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search Movies..." onkeyup="search()">
        </div>
        <div onclick="showPanel('account')" id="uIcon" style="width:35px; height:35px; border-radius:50%; background:var(--gold); color:black; display:flex; align-items:center; justify-content:center; font-weight:800; cursor:pointer; justify-self: end;">?</div>
    </nav>

    <div class="sidebar" id="sidebar">
        <div class="side-link" onclick="showAllMovies()">Discovery</div>

        <hr style="border:0; border-top:1px solid #222; margin:10px 0;">
        <div class="side-link" onclick="showWatchlist()">My Watchlist</div>

        <span style="font-size:10px; color:#444; letter-spacing:2px;">CATEGORIES</span>
        <div class="side-link" onclick="filter('Action')">Action</div>
        <div class="side-link" onclick="filter('Sci-Fi')">Sci-Fi</div>
        <div class="side-link" onclick="filter('Horror')">Horror</div>
        <div class="side-link" onclick="filter('Drama')">Drama</div>
        <div class="side-link" onclick="filter('Documentary')">Documentary</div>
        <hr style="border:0; border-top:1px solid #222; margin:10px 0;">
        <div class="side-link" onclick="showPanel('account')">Account Details</div>
        <div class="side-link" onclick="showPanel('settings')">Settings</div>
        <div class="side-link" onclick="showPanel('contact')">Contact Support</div>
        <div class="side-link" style="color:#ff4444" onclick="logout()">Logout</div>
    </div>

    <section class="hero" id="heroBanner">
        <div>
        <h1 onclick="showAllMovies()" style="cursor:pointer">
    CINE<span style="color:var(--gold)">LUX</span>
</h1>

            <p style="color:var(--gold); font-weight:800; letter-spacing:4px;">NEW RELEASE</p>
            <h1 style="font-size: 4.5rem; line-height:1; margin: 15px 0;">INTERSTELLAR</h1>
            <button class="btn-gold" style="width:auto; padding: 15px 40px;" onclick="openTheater('Interstellar')">STREAM NOW</button>
        </div>
    </section>
<div id="homePanel" class="panel active-panel">
    <h2 id="catTitle" style="margin-bottom:30px; font-weight:300; letter-spacing:2px;">DISCOVERY</h2>
    <div class="movie-grid" id="movieGrid"></div>
</div>


<div id="accountPanel" class="panel">
    <h1 style="margin-bottom: 20px;">Account Settings</h1>
    <div class="card">
        <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 30px; border-bottom: 1px solid var(--border); padding-bottom: 20px;">
            <div id="uAvatar" style="width: 80px; height: 80px; border-radius: 50%; background: var(--gold); display: flex; align-items: center; justify-content: center; font-size: 2rem; color: black; font-weight: 800;">?</div>
            <div>
                <h2 id="uNameDisplay">User Name</h2>
                <p id="uEmail" style="color: #888;"></p>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="info-group">
                <label style="color: #666; font-size: 12px; display: block; margin-bottom: 5px;">MEMBERSHIP</label>
                <p style="color: var(--gold); font-weight: 600;">CineLux Premium (Annual)</p>
            </div>
            <div class="info-group">
                <label style="color: #666; font-size: 12px; display: block; margin-bottom: 5px;">BILLING DATE</label>
                <p>March 12, 2026</p>
            </div>
        </div>
        
        <button class="btn-gold" style="margin-top: 30px; width: auto; padding: 12px 25px; font-size: 14px;">MANAGE SUBSCRIPTION</button>
        <button onclick="logout()" style="background:transparent; border:1px solid #ff4444; color:#ff4444; padding: 12px 25px; border-radius:10px; cursor:pointer; margin-left:10px;">SIGN OUT</button>
    </div>
</div>

<div id="settingsPanel" class="panel">
    <h1 style="margin-bottom: 20px;">Preferences</h1>
    <div class="card">
        <h3 style="margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 10px;">Playback</h3>
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <div>
                <p>Auto-play next episode</p>
                <small style="color: #666;">Play the next video in the series automatically.</small>
            </div>
            <input type="checkbox" checked style="width: 20px; height: 20px; accent-color: var(--gold);">
        </div>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <div>
                <p>Data Saver Mode</p>
                <small style="color: #666;">Reduce stream quality to save mobile data.</small>
            </div>
            <input type="checkbox" style="width: 20px; height: 20px; accent-color: var(--gold);">
        </div>

        <h3 style="margin: 30px 0 20px; border-bottom: 1px solid var(--border); padding-bottom: 10px;">Video Quality</h3>
        <select class="input-f" style="margin-bottom: 0;">
            <option>Auto (Recommended)</option>
            <option>4K Ultra HD</option>
            <option>1080p Full HD</option>
            <option>720p HD</option>
        </select>
        
        <h3 style="margin: 30px 0 20px; border-bottom: 1px solid var(--border); padding-bottom: 10px;">Language & Subtitles</h3>
        <div style="display: flex; gap: 10px;">
            <select class="input-f"><option>Audio: English</option><option>Audio: Hindi</option></select>
            <select class="input-f"><option>Subs: Off</option><option>Subs: English</option></select>
        </div>
    </div>
</div>


        <div id="contactPanel" class="panel">
            <h1>Contact Support</h1>
            <div class="card">
                <input type="text" class="input-f" placeholder="Subject">
                <textarea class="input-f" placeholder="How can we help?" style="height:150px;"></textarea>
                <button class="btn-gold" onclick="alert('Support Message Sent!')">Send Message</button>
            </div>
        </div>
    </div>

    <script>
        const movies = [
            { title: "Inception", rating: "8.8", img: "https://images.unsplash.com/photo-1440404653325-ab127d49abc1?auto=format&fit=crop&w=400&q=80" },
            { title: "The Dark Knight", rating: "9.0", img: "https://images.unsplash.com/photo-1478720568477-152d9b164e26?auto=format&fit=crop&w=400&q=80" },
            { title: "Avatar: Way of Water", rating: "7.8", img: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?auto=format&fit=crop&w=400&q=80" },
            { title: "The Matrix", rating: "8.7", img: "https://images.unsplash.com/photo-1626814026160-2237a95fc5a0?auto=format&fit=crop&w=400&q=80" },
            { title: "Joker", rating: "8.4", img: "https://images.unsplash.com/photo-1509248961158-e54f6934749c?auto=format&fit=crop&w=400&q=80" },
            { title: "The Martian", rating: "8.0", img: "https://images.unsplash.com/photo-1614728263952-84ea256f9679?auto=format&fit=crop&w=400&q=80" }
        ];

let myWatchlist = JSON.parse(localStorage.getItem('watchlist')) || [];


function onGoogleLogin(res){
    const payload = JSON.parse(atob(res.credential.split('.')[1]));
    localStorage.setItem('user',JSON.stringify(payload));
    location.reload();
}

function init() {
    const u = JSON.parse(localStorage.getItem('user'));
    
    // 1. Agar user logged in nahi hai
    if (!u) {
        document.getElementById('authOverlay').style.display = 'flex';
        return; 
    }

    // 2. Hide login screen
    document.getElementById('authOverlay').style.display = 'none';

    // 3. Update UI Elements
    const userIcon = document.getElementById('uIcon');      // Top Nav Icon
    const uAvatar = document.getElementById('uAvatar');    // Account Panel Big Icon
    const uNameDisplay = document.getElementById('uNameDisplay'); // Account Name
    const uEmail = document.getElementById('uEmail');      // Account Email

    // Profile Picture Logic
    if(u.picture) {
        const imgHtml = `<img src="${u.picture}" style="width:100%; height:100%; border-radius:50%; object-fit:cover;">`;
        userIcon.innerHTML = imgHtml;
        if(uAvatar) uAvatar.innerHTML = imgHtml;
    } else {
        const initial = u.name ? u.name[0] : '?';
        userIcon.innerText = initial;
        if(uAvatar) uAvatar.innerText = initial;
    }
    
    // Name aur Email fill karein
    if(uNameDisplay) uNameDisplay.innerText = u.name || "CineLux User";
    if(uEmail) uEmail.innerText = u.email;

    // 4. Movies render karein
    render(movies);
}


// Keep only ONE render function
function render(data) {
    const grid = document.getElementById('movieGrid');
    if (!grid) return;

    grid.innerHTML = data.map(m => {
        const isSaved = myWatchlist.includes(m.title);

        return `
            <div class="movie-card">
                <img src="${m.img}" alt="${m.title}">
                
                <div class="movie-overlay">
                    <button class="opt-btn play-btn" onclick="openTheater('${m.title}')">▶ PLAY</button>
                    <button class="opt-btn watch-btn" onclick="toggleWatchlist('${m.title}')">
                        ${isSaved ? '✓ SAVED' : '+ WATCHLIST'}
                    </button>
                </div>

                <div class="movie-info">
                    <h3 style="font-size: 1rem; margin: 0;">${m.title}</h3>
                    <span style="color: var(--gold); font-size: 0.8rem;">★ ${m.rating || '8.5'}</span>
                </div>

                <div style="position:absolute; top:10px; right:10px; background:rgba(0,0,0,0.7); padding:2px 8px; border-radius:4px; font-size:10px; color:var(--gold);">
                    ${m.cat || 'Movie'}
                </div>
            </div>
        `;
    }).join('');
}

function search() {
    const q = document.getElementById('searchInput').value.toLowerCase();
    render(movies.filter(m => m.title.toLowerCase().includes(q)));
}

function filter(c) {
    // We need to ensure catTitle exists or just use an alert/header
    const titleEl = document.getElementById('catTitle');
    if(titleEl) titleEl.innerText = c.toUpperCase();
    
    render(movies.filter(m => m.cat === c));
    showPanel('home');
}

function showWatchlist() {
    const savedMovies = movies.filter(m => myWatchlist.includes(m.title));
    const titleEl = document.getElementById('catTitle');
    if(titleEl) titleEl.innerText = "MY WATCHLIST";
    
    showPanel('home');
    
    if (savedMovies.length === 0) {
        document.getElementById('movieGrid').innerHTML = `
            <div style="grid-column: 1/-1; text-align: center; padding: 50px; color: #666;">
                <h3>Your watchlist is empty</h3>
                <p>Click + WATCHLIST on any movie to save it here.</p>
            </div>`;
    } else {
        render(savedMovies);
    }
}

function toggleWatchlist(title) {
    const index = myWatchlist.indexOf(title);
    if (index === -1) {
        myWatchlist.push(title);
    } else {
        myWatchlist.splice(index, 1);
    }
    localStorage.setItem('watchlist', JSON.stringify(myWatchlist));

    const titleEl = document.getElementById('catTitle');
    if (titleEl && titleEl.innerText === "MY WATCHLIST") {
        showWatchlist();
    } else {
        render(movies);
    }
}


function search() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            render(movies.filter(m => m.title.toLowerCase().includes(q)));
        }

function render(data) {
    const grid = document.getElementById('movieGrid');
    if (!grid) return;

    grid.innerHTML = data.map(m => {
        // Check karein ki movie watchlist mein hai ya nahi
        const isSaved = myWatchlist.includes(m.title);

        return `
            <div class="movie-card">
                <img src="${m.img}" alt="${m.title}">
                
                <div class="movie-overlay">
                    <button class="opt-btn play-btn" onclick="openTheater('${m.title}')">▶ PLAY</button>
                    
                    <button class="opt-btn watch-btn" onclick="toggleWatchlist('${m.title}')">
                        ${isSaved ? '✓ SAVED' : '+ WATCHLIST'}
                    </button>
                </div>

               

                <div style="position:absolute; top:10px; right:10px; background:rgba(0,0,0,0.7); padding:2px 8px; border-radius:4px; font-size:10px; color:var(--gold);">
                    ${m.cat}
                </div>
            </div>
        `;
    }).join('');
}



        function filter(c) {
            document.getElementById('catTitle').innerText = c.toUpperCase();
            render(movies.filter(m => m.cat === c));
            showPanel('home');
        }

        function openTheater(t) {
            document.getElementById('mTitle').innerText = t;
            document.getElementById('theater').style.display = 'flex';
        }

        function closeTheater() { document.getElementById('theater').style.display = 'none'; document.getElementById('vid').pause(); }

        function showPanel(p) {
            document.querySelectorAll('.panel').forEach(el => el.classList.remove('active-panel'));
            document.getElementById(p + 'Panel').classList.add('active-panel');
            document.getElementById('heroBanner').style.display = (p === 'home') ? 'flex' : 'none';
            toggleMenu(false);
        }

function showWatchlist() {
    // 1. Filter the main movies list based on titles stored in myWatchlist
    const savedMovies = movies.filter(m => myWatchlist.includes(m.title));
    
    // 2. Change the Title on the page
    document.getElementById('catTitle').innerText = "MY WATCHLIST";
    
    // 3. Show the Home panel where the grid is
    showPanel('home');
    
    // 4. Render only the saved movies
    if (savedMovies.length === 0) {
        document.getElementById('movieGrid').innerHTML = `
            <div style="grid-column: 1/-1; text-align: center; padding: 50px; color: #666;">
                <h3>Your watchlist is empty</h3>
                <p>Click + WATCHLIST on any movie to save it here.</p>
            </div>`;
    } else {
        render(savedMovies);
    }
}

window.addEventListener('click', function(e) {
    const sidebar = document.getElementById('sidebar');
    const menuBtn = document.querySelector('nav div'); // The Menu button
    
    if (sidebar.classList.contains('open') && !sidebar.contains(e.target) && e.target !== menuBtn) {
        toggleMenu(false);
    }
});


function toggleWatchlist(title) {
    const index = myWatchlist.indexOf(title);
    if (index === -1) {
        myWatchlist.push(title);
    } else {
        myWatchlist.splice(index, 1);
    }
    localStorage.setItem('watchlist', JSON.stringify(myWatchlist));

    // If we are currently looking at the Watchlist, refresh with filtered results
    if (document.getElementById('catTitle').innerText === "MY WATCHLIST") {
        showWatchlist();
    } else {
        render(movies); // Otherwise just refresh the normal grid
    }
}
function showAllMovies() {
    // 1. Change the heading back to DISCOVERY
    const titleEl = document.getElementById('catTitle');
    if (titleEl) titleEl.innerText = "DISCOVERY";

    // 2. Make sure we are on the home panel
    showPanel('home');

    // 3. Render the full array
    render(movies);
    
    // 4. Close the menu
    toggleMenu(false);
}


        function toggleMenu(open = null) {
            const s = document.getElementById('sidebar');
            if(open === false) s.classList.remove('open');
            else s.classList.toggle('open');
        }
function logout(){
    localStorage.clear();
    location.reload();
}
        init();
</script>

</body>
            </html>
